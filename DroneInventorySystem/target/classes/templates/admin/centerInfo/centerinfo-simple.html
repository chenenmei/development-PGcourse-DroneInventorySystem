<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  th:replace="~{layout/template :: layout(~{::title},~{::body/content()})}"
>
  <head>
    <title>InvenTrack</title>
  </head>

  <body>
    <div class="card shadow mb-4">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">在庫センター情報</h6>
      </div>

      <div class="card-body">
        <!-- 検索フォーム -->
        <div class="search-container mb-4">
          <form th:action="@{/admin/centerInfo/search}" method="get" class="form-inline">
            <label for="centerName" class="mr-2">検索条件</label>
            
            <label for="centerName" class="mr-2">センター名</label>
            <input type="text" id="centerName" name="centerName" class="form-control mr-2">
            
            <label for="region" class="mr-2">都道府県</label>
            <select id="region" name="region" class="form-control mr-2">
              <option value="">選択してください</option>
              <option th:each="region : ${regions}" 
                th:value="${region.name}" 
                th:text="${region.name}"></option>
            </select>
            
            <!-- 現在容量範囲検索機能 -->
            <label for="storageCapacityFrom" class="mr-2">現在容量(㎥)</label>
            <input type="text" id="storageCapacityFrom" name="storageCapacityFrom" 
                  class="form-control mr-2" maxlength="10">

            <span class="mr-2">～</span>

            <input type="text" id="storageCapacityTo" name="storageCapacityTo" 
                  class="form-control mr-2" maxlength="10">
            
            <button type="submit" class="btn btn-primary">検索</button>
          </form>
          
          <!-- エラーメッセージの表示 -->
          <div th:if="${errorMsg}" class="text-danger mt-2">
            <p th:text="${errorMsg}"></p>
          </div>
          
          <!-- 情報メッセージの表示 -->
          <div th:if="${infoMessage}" class="text-info mt-2">
            <p th:text="${infoMessage}"></p>
          </div>
        </div>
        
        <!-- 在庫センター情報テーブル -->
        <div class="table-responsive">
          <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
            <thead>
              <tr>
                <th>センター名</th>
                <th>住所</th>
                <th>連絡先</th>
                <th>管理者名</th>
                <th>最大容量(㎥)</th>
                <th>現在容量(㎥)</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="item : ${centerInfoList}">
                <td th:text="${item.centerName}"></td>
                <td th:text="${item.address}"></td>
                <td th:text="${item.phoneNumber}"></td>
                <td th:text="${item.managerName}"></td>
                <td th:text="${item.maxStorageCapacity}"></td>
                <td th:text="${item.currentStorageCapacity}"></td>
              </tr>
            </tbody>
          </table>
          
          <!-- 検索結果がない場合のメッセージ -->
          <div th:if="${#lists.isEmpty(centerInfoList)}" class="text-muted mt-3">
            <p>検索結果がありません。</p>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
